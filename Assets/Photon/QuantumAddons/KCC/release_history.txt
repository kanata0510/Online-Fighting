# Photon Quantum KCC Addon

Last tested with `Quantum SDK 3.0.0 Stable 1548`

## 3.0.4

- Added Entity reference to KCC.
- KCC.Teleport(FPVector3) marked as obsolete and replaced by KCC.Teleport(Frame, FPVector3). This propagates the teleport also to Transform3D component.
- Drawing KCC collider gizmo based on linked KCC settings when the game object is selected.
- Quantum.Unity.asmref file moved from KCC/View/Generated to KCC/View.

## 3.0.3 (Breaking Changes)

- Code generated prototype scripts are now included in the addon package instead of being generated in the user project.
  After upgrading the addon old prototype scripts are deleted and `QuantumEntityPrototypes` that used them will break.
  To migrate choose one of the options before upgrading:
  - A) Search And Replace Guids
    - Close Unity Editor
    - Open the `QPrototypeKCC.cs.meta` file, copy the Unity script guid and search and replace all occurrences of it with `ef7706d4b9fc4dc468d3a1cf0c2dde40` in files inside the Assets folder.
    - Open the `QPrototypeKCCProcessorLink.cs.meta` file, copy the Unity script guid and search and replace all occurrences of it with `6a24c6b0be5af364298f6a16f1d81325` in files inside the Assets folder.
  - B) Rename And Inherit Class
    - Open the `QPrototypeKCC.cs` file in Rider or VS, rename the class to `LegacyQPrototypeKCC`, inherit it from `QPrototypeKCC` and delete its content.
    ```csharp
    public unsafe partial class LegacyQPrototypeKCC : QPrototypeKCC {
    }
    ```
    - Open the `QPrototypeKCCProcessorLink.cs` file in Rider or VS, rename the class to `LegacyQPrototypeKCCProcessorLink`, inherit it from `QPrototypeKCCProcessorLink` and delete its content.
    ```csharp
    public unsafe partial class LegacyQPrototypeKCCProcessorLink : QPrototypeKCCProcessorLink {
    }
    ```
    - Rename the `QPrototypeKCC` script inside Unity Editor to `LegacyQPrototypeKCC` and move it into a subfolder called `Legacy.`
    - Rename the `QPrototypeKCCProcessorLink` script inside Unity Editor to `LegacyQPrototypeKCCProcessorLink` and move it into a subfolder called `Legacy`.

## 3.0.2

- Improved penetration solver.
- Range of CCD Radius Multiplier increased to 10-90%.
- Ground snap processor now does all checks on separate `KCCData` instance to avoid side effects.
- `KCC.ResolvePenetration()` now takes data from `KCCData` passed as argument and stores results there.
- Added `[Preserve]` attribute to `KCCSystem` prevent stripping.

## 3.0.1

- Improved multi-collider penetration correction.
- Fixes for `StepUpProcessor`. Now it requires horizontal movement push-back to activate.
- Fixed initialization of `KCCData.LookYaw` after spawning an entity based on its transform component.

## 3.0.0

- Initial release.
